Para começar a entender como fazer testes, precisamos passar por alguns pontos antes, entendê-los nos trará uma maior compreensão do que vamos realizar:
A biblioteca history é uma ferramenta que lhe permite acessar a sessão de histórico do navegador e também a localização atual (URL), onde quer que o JavaScript execute, nesse link tem uma documentação de fácil consulta.
Na documentação acima, tem uma explicação sobre todos os métodos da biblioteca, mas para nossos testes, os métodos mais utilizados são o push , que te permite mudar de rota dentro do ambiente de testes , e o location.pathname , que te retorna a URL exata em que você está.
De dentro da biblioteca, você também importará a createMemoryHistory , que é feita para ser utilizada em ambientes que não possuem DOM, por exemplo, em testes automatizados. O trabalho dessa função é criar um novo histórico de navegação, para ser utilizado durante o teste. Essa biblioteca é bastante utilizada nesses casos, como veremos no próximo tópico.
A função renderWithRouter é uma função customizada para fazer testes com rotas, uma vez que a função render normal da RTL não dá suporte ao router . Ela pode ser muito útil e usa o createMemoryHistory para embutir no seu componente renderizado a lógica de histórico de navegação , para uso nos testes. Veja o código de exemplo para se familiarizar. Vamos praticar com um novo app React:
